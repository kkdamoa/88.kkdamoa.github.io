<!DOCTYPE html>
<html lang="ko">
<head>

    <!-- 카카오 SDK 초기화 -->
    <script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
    <script>
        // 카카오 SDK 초기화 코드
        Kakao.init('1a44c2004824d4e16e69f1fc7e81d82c'); // 카카오 JavaScript 키 초기화
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>에니어그램 테스트</title>
    <link rel="stylesheet" href="에리어.css"> <!-- 외부 CSS 파일을 연결 -->
    <style>
        /* 팝업 스타일 */
        .popup {
            display: none; /* 기본적으로 팝업은 숨김 */
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-width: 600px;
            background-color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            padding: 20px;
            z-index: 1000;
        }

        /* 배경 클릭 시 팝업 닫기 */
        .popup-overlay {
            display: none; /* 기본적으로 배경은 숨김 */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }

        /* 버튼 스타일 */
        .open-popup-btn,
        .confirm-popup-btn {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }

        .confirm-popup-btn {
            display: none; /* 초기에는 숨김 */
            background-color: green;
        }

        /* 카운터 스타일 */
        .counter {
            font-size: 20px;
            margin-top: 10px;
            font-weight: bold;
        }

        /* 결과 보기 버튼 */
        #showResultButton {
            display: none; /* 처음에는 숨김 */
        }

        /* 공유 버튼 스타일 */
        .social-share {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }

        .share-button {
            display: inline-block;
        }

        .share-icon {
            width: 40px;
            height: 40px;
            object-fit: contain;
        }
        #startTest {
            padding: 20px 40px; /* 버튼의 크기를 키움 */
            font-size: 24px;     /* 글씨 크기 */
            font-weight: bold;   /* 글씨 굵게 */
            background-color: #007bff; /* 버튼 배경색 */
            color: white;        /* 글씨 색 */
            border: none;        /* 테두리 제거 */
            border-radius: 8px;  /* 둥근 모서리 */
            cursor: pointer;     /* 마우스 커서 모양 변경 */
            transition: background-color 0.3s, transform 0.3s; /* 배경색과 크기 변화에 애니메이션 추가 */
        }
        
        #startTest:hover {
            background-color: #0056b3; /* 마우스 오버 시 배경색 변경 */
            transform: scale(1.1);      /* 마우스 오버 시 버튼 크기 키움 */
        }
        
        #startTest:focus {
            outline: none;  /* 포커스 시 외곽선 제거 */
        }
    </style>
</head>

<body>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9374368296307755"
    crossorigin="anonymous"></script>
    
    <!-- 광고 삽입 -->
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-9374368296307755"
         data-ad-slot="3201247599"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

    <header>
        <h1>에니어그램 테스트</h1>

        <p>"에니어그램은 인간의 성격을 9가지 유형으로 분류하는 심리학적 모델로,</p>
        <p>개인의 행동 패턴과 내면의 동기를 깊이 있게 이해하는 데 도움을 줍니다.</p>
        <p>이 모델은 사람들이 자기 자신을 더 잘 이해하고,</p>
        <p>타인과의 관계에서 효과적으로 소통할 수 있도록 돕기 위해 설계되었습니다.</p>
        <p>각 성격 유형은 고유한 특징과 동기를 가지며,</p>
        <p>이러한 특성을 이해함으로써 우리는 자신의 강점과 약점을 파악하고,</p>
        <p>개인적 성장과 변화의 방향을 제시받을 수 있습니다.</p>
        <p>에니어그램은 단순히 성격을 분류하는 것을 넘어,</p>
        <p>더 나은 인간 관계와 자기 계발을 위한 중요한 도구로 활용됩니다.</p>
        <p>이 테스트는 단순한 성격 분석을 넘어서, 여러분이 잠재된 가능성을 탐색하고,</p>
        <p>자기 자신과 주변 사람들에 대한 이해를 높이는 기회가 될 것입니다."</p>
        <button id="startTest">테스트 시작 ➔</button>
    </header>


    <main id="testSection" class="hidden">
        <p>설명: 각 제안에 대해, 가장 적합한 선택지를 체크해주세요.</p>
        
        <!-- 진행 바 -->
        <div class="progress-container">
            <div class="progress-bar" id="progressBar">0%</div>
        </div>

        <!-- 질문 목록 -->
        <div id="question-container"></div> <!-- 질문들이 여기에 동적으로 생성됩니다 -->

        <!-- 결과 보기 버튼 -->
        <button id="showResultButton">결과 보기</button>
    </main>

    <!-- 결과 섹션 -->
    <div id="resultSection" class="hidden">
        <h2>테스트 결과</h2>
        <p id="resultText"></p>
    </div>

    <!-- 팝업 배경 -->
    <div class="popup-overlay"></div>

    <!-- 팝업 콘텐츠 -->
    <div class="popup">
        <div id="adsense-container"></div>
        <div class="counter" id="counter">결과값 분석중입니다.</div>
        <button class="confirm-popup-btn">확인</button>
    </div>

    <script src="에리어.js"></script>
    <script>
        const questions = [
            "나는 일상에서 규칙을 지키는 것이 매우 중요하다고 느낀다.",
            "나는 일을 할 때, 결과보다 과정에 더 많은 신경을 쓴다.",
            "나는 다른 사람들이 나보다 더 효율적으로 일을 처리하는 것 같아 불안감을 느낀다.",
            "나는 완벽하지 않으면 불편하거나 불만족스러움을 느낀다.",
            "나는 내 감정을 드러내는 것보다는 일을 우선시하는 편이다.",
            "나는 부정확하거나 부주의한 행동에 대해서 쉽게 화가 난다.",
            "내가 설정한 기준을 지키지 않으면 자신에게 실망감을 느낀다.",
            "내가 도와주는 사람들이 고마움을 표현하지 않으면 서운하다.",
            "다른 사람들의 감정에 매우 민감하다.",
            "내가 주는 사랑과 관심을 받지 못한다고 느낄 때 마음이 아프다."
        ];

        const container = document.getElementById("question-container");
        const showResultButton = document.getElementById('showResultButton');
        const qRadios = [];

        // 질문 배열을 순회하여 자동으로 질문을 생성
        questions.forEach((question, index) => {
            const questionDiv = document.createElement("div");
            questionDiv.classList.add("question");
            questionDiv.setAttribute("data-question", index + 1);

            // 질문 내용 추가
            const questionText = document.createElement("p");
            questionText.textContent = question;
            questionDiv.appendChild(questionText);

            // 라디오 버튼 컨테이너 생성
            const radioContainer = document.createElement("div");
            radioContainer.classList.add("radioContainer");

            // 라디오 버튼 옵션 생성
            const options = [
                { value: "-2", label: "전혀 그렇지 않다" },
                { value: "-1", label: "그렇지 않다" },
                { value: "0", label: "보통이다" },
                { value: "1", label: "그렇다" },
                { value: "2", label: "매우 그렇다" }
            ];

            options.forEach(option => {
                const label = document.createElement("label");
                label.classList.add("labelContainer");
                const radio = document.createElement("input");
                radio.type = "radio";
                radio.name = `q${index + 1}`;
                radio.value = option.value;
                radio.addEventListener("change", () => {
                    showResultButton.style.display = 'inline-block'; // 결과 보기 버튼 표시
                });
                const span = document.createElement("span");
                span.classList.add("checkmark");
                label.appendChild(radio);
                label.appendChild(span);
                radioContainer.appendChild(label);
            });

            questionDiv.appendChild(radioContainer);
            container.appendChild(questionDiv);
        });

        // 결과 보기 버튼 클릭 시 팝업 열기
        showResultButton.addEventListener('click', () => {
            popup.style.display = 'block'; // 팝업 표시
            popupOverlay.style.display = 'block'; // 배경 표시
            loadAd(); // 광고 로드
            startCountdown(); // 카운트다운 시작
        });

        // 확인 버튼 클릭 시 팝업 닫기
        confirmPopupBtn.addEventListener('click', () => {
            popup.style.display = 'none'; // 팝업 숨기기
            popupOverlay.style.display = 'none'; // 배경 숨기기
            clearAd(); // 광고 제거
            clearInterval(countdown); // 카운트다운 정지
        });

        // 배경 클릭 시 팝업 닫기
        popupOverlay.addEventListener('click', () => {
            popup.style.display = 'none';
            popupOverlay.style.display = 'none';
            clearAd(); // 광고 제거
            clearInterval(countdown); // 카운트다운 정지
        });

        // 광고 로드 함수
        function loadAd() {
            const adScript = document.createElement('script');
            adScript.async = true;
            adScript.src = "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9374368296307755";
            document.head.appendChild(adScript);

            const adContainer = document.createElement('ins');
            adContainer.classList.add('adsbygoogle');
            adContainer.style.display = 'block';
            adContainer.setAttribute('data-ad-client', 'ca-pub-9374368296307755');
            adContainer.setAttribute('data-ad-slot', '3201247599');
            adContainer.setAttribute('data-ad-format', 'auto');
            adContainer.setAttribute('data-full-width-responsive', 'true');

            adsenseContainer.appendChild(adContainer);

            (adsbygoogle = window.adsbygoogle || []).push({});
        }

        // 광고 제거 함수
        function clearAd() {
            adsenseContainer.innerHTML = '';
        }

        // 카운트다운 함수
        function startCountdown() {
            let timeLeft = 7;
            counter.textContent = `${timeLeft}초 결과값 확인중 입니다..`;

            countdown = setInterval(() => {
                timeLeft--;
                counter.textContent = `${timeLeft}초 결과값 확인중 입니다..`;
                if (timeLeft <= 0) {
                    clearInterval(countdown);
                    counter.textContent = "결과값이 나왔습니다";
                    confirmPopupBtn.style.display = 'inline-block'; // 확인 버튼 표시
                }
            }, 1000);
        }
    </script>
</body>
</html>
